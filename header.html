<!-- header.html -->
<header id="site-header"></header>

<script>
  // 1) Dinamiškai įkeliame nav + auth mygtukus
  document.addEventListener('DOMContentLoaded', async () => {
    const resp = await fetch('header.html');
    const html = await resp.text();
    document.getElementById('site-header').innerHTML = html;

    // 2) Firebase SDK
    const scriptApp = document.createElement('script');
    scriptApp.src = 'https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js';
    document.head.appendChild(scriptApp);

    const scriptAuth = document.createElement('script');
    scriptAuth.src = 'https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js';
    document.head.appendChild(scriptAuth);

    // 3) Firebase init (įtraukti savo konfigūraciją į firebase-config.js!)
    await new Promise(r => scriptAuth.onload = r);
    // firebase initialized in firebase-config.js

    // 4) Auth logika
    const btnSignUp = document.getElementById('sign-up');
    const btnLogin  = document.getElementById('login');
    const btnSignOut = document.getElementById('sign-out');

    firebase.auth().onAuthStateChanged(user => {
      if (user) {
        btnSignUp.style.display = 'none';
        btnLogin.style.display   = 'none';
        btnSignOut.style.display = 'inline-block';
      } else {
        btnSignUp.style.display = 'inline-block';
        btnLogin.style.display   = 'inline-block';
        btnSignOut.style.display = 'none';
      }
    });

    btnSignUp.addEventListener('click',  () => window.location.href = 'signup.html');
    btnLogin .addEventListener('click',  () => window.location.href = 'login.html');
    btnSignOut.addEventListener('click', () => firebase.auth().signOut());
  });
</script>

<!-- pačio header.html turinys -->
<nav class="main-nav">
  <ul>
    <li><a href="home.html">Home</a></li>
    <li><a href="quiz.html">Quiz</a></li>
    <li><a href="result.html">Results</a></li>
    <li><a href="my-soul.html">My Soul</a></li>
    <li><a href="edit-profile.html">Edit Profile</a></li>
    <li><a href="soul-chart.html">Soul Chart</a></li>
    <li><a href="soul-coach.html">Soul Coach</a></li>
    <li><a href="soulink-match.html">Match</a></li>
    <li><a href="friends.html">Friends</a></li>
  </ul>
  <div class="auth-buttons">
    <button id="sign-up"    class="cta-button-outline">Sign Up</button>
    <button id="login"      class="cta-button-outline">Login</button>
    <button id="sign-out"   class="cta-button-outline" style="display:none;">Sign Out</button>
  </div>
</nav>
