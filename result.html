<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Soulprint Result</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    #pdf-only {
      display: none;
    }
    @media print {
      body * {
        visibility: hidden;
      }
      #pdf-only, #pdf-only * {
        visibility: visible;
      }
      #pdf-only {
        position: absolute;
        left: 0;
        top: 0;
      }
    }
    #pdf-content {
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-white via-rose-50 to-pink-100 text-gray-800 font-sans">
  <main class="p-6 max-w-2xl mx-auto space-y-6">
    <div id="pdf-content" class="bg-white shadow rounded-lg p-6">
      <h1 class="text-2xl font-bold text-center">üåü Your Soulprint Summary</h1>
      <p><strong>Name:</strong> <span id="name">...</span></p>
      <p><strong>Birthdate:</strong> <span id="birthdate">...</span></p>
      <p><strong>Love Language:</strong> <span id="loveLanguage">...</span></p>
      <p><strong>Zodiac Sign:</strong> <span id="zodiac">...</span></p>
      <p><strong>Chinese Zodiac:</strong> <span id="chineseZodiac">...</span></p>
      <p><strong>Life Path Number:</strong> <span id="lifePath">...</span></p>
      <p><strong>AI Soul Description:</strong></p>
      <p id="description" class="italic text-purple-700 whitespace-pre-line">...</p>
      <p class="mt-4 text-center text-sm text-gray-500">With love from Soulink üíñ</p>
    </div>
    <div class="text-center">
      <p id="infoMsg" class="text-sm text-gray-500 mb-2">You can download your soulprint once your data is fully loaded üí´</p>
      <button id="downloadBtn" disabled class="bg-purple-300 text-white py-2 px-4 rounded transition">üéÅ Download My Soulprint as PDF</button>
    </div>
  </main>

  <script>
    const soulData = {
      name: localStorage.getItem("name") || "Unknown",
      birthdate: localStorage.getItem("birthdate") || "1972-11-22",
      loveLanguage: localStorage.getItem("loveLanguage") || "Acts of Service",
      zodiac: localStorage.getItem("zodiac") || "Sagittarius",
      chineseZodiac: localStorage.getItem("chineseZodiac") || "Rat",
      lifePath: localStorage.getItem("lifePath") || "7",
      description: localStorage.getItem("longDescription") || `Rita is a radiant Sagittarius soul, born under the skies of adventure and truth. With the intuitive heart of the Rat and the wisdom of a Life Path 7, she walks the earth seeking meaning beyond the surface.

Her love language, Acts of Service, speaks of silent strength ‚Äì love expressed not in words, but in presence, effort, and care. She nurtures harmony through giving, and uplifts others through sincerity.

A natural guide to those lost in the fog, Rita holds space for authenticity and kindness. She is art, she is healing, she is light.`
    };

    // Populate the page
    document.getElementById("name").textContent = soulData.name;
    document.getElementById("birthdate").textContent = soulData.birthdate;
    document.getElementById("loveLanguage").textContent = soulData.loveLanguage;
    document.getElementById("zodiac").textContent = soulData.zodiac;
    document.getElementById("chineseZodiac").textContent = soulData.chineseZodiac;
    document.getElementById("lifePath").textContent = soulData.lifePath;
    document.getElementById("description").textContent = soulData.description;

    // Enable button once everything is loaded
    setTimeout(() => {
      document.getElementById("downloadBtn").disabled = false;
      document.getElementById("downloadBtn").classList.remove("bg-purple-300");
      document.getElementById("downloadBtn").classList.add("bg-purple-600", "hover:bg-purple-700");
    }, 500);

    // PDF download
    document.getElementById("downloadBtn").addEventListener("click", () => {
      const element = document.getElementById("pdf-content");
      html2pdf().from(element).set({
        margin: 0.5,
        filename: `${soulData.name.replaceAll(' ', '_')}_Soulprint.pdf`,
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
      }).save();
    });
  </script>
<script type="module" src="generate-pdf.js"></script>

</body>
</html>
